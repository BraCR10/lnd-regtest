# Configuration

## .env reference

Copy `.env.example` to `.env` and fill in your values:

```bash
cp .env.example .env
nano .env
```

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `BITCOIND_RPC_USER` | Yes | — | Must match your `bitcoin.conf` |
| `BITCOIND_RPC_PASS` | Yes | — | Must match your `bitcoin.conf` |
| `WALLET_PASS` | No | *(prompted)* | LND wallet password (min 8 chars) |
| `BITCOIND_HOST` | No | `127.0.0.1` | Bitcoin Core host |
| `BITCOIND_RPC_PORT` | No | `18443` | Bitcoin Core RPC port |
| `MINER_WALLET` | No | `miner` | Wallet name in bitcoind for mining |
| `LND_IMAGE` | No | `lightninglabs/lnd:v0.20.1-beta` | LND Docker image |
| `FUND_LND1_BTC` | No | `8` | BTC to fund lnd1 |
| `FUND_LND2_BTC` | No | `3` | BTC to fund lnd2 |
| `CHANNEL_SATS` | No | `500000000` | Channel capacity in sats |
| `REBALANCE_SATS` | No | `250000000` | Amount to push for balancing |
| `RTL_IMAGE` | No | `shahanafarooqui/rtl:v0.15.8` | RTL Docker image |
| `RTL_PORT` | No | `3000` | RTL web UI port |
| `RTL_PASSWORD` | No | *(WALLET_PASS)* | RTL login password |
| `MOSTRO_IMAGE` | No | `mostrop2p/mostro:latest` | Mostro Docker image |
| `MOSTRO_NSEC_PRIVKEY` | No | *(prompted)* | Nostr private key for Mostro |
| `MOSTRO_RELAYS` | No | `wss://nos.lol,wss://relay.mostro.network` | Nostr relays (comma-separated) |
| `LNURL_DOMAIN` | No | *(disabled)* | Domain for Lightning Address (enables step 9) |
| `LNURL_USERNAMES` | No | `admin` | Comma-separated usernames (`admin,user2`) |
| `SATDRESS_PORT` | No | `17422` | satdress HTTP port |

## Directory structure

```
~/BTC/lnd/
├── setup.sh
├── .env.example           # template (committed)
├── .env                   # your credentials (git-ignored)
├── docker-compose.yml     # generated by the script
├── lnd1/
│   ├── lnd.conf           # generated
│   └── data/
│       ├── seed.txt        # 24-word mnemonic
│       └── wallet-password.txt
├── lnd2/
│   ├── lnd.conf
│   └── data/
│       ├── seed.txt
│       └── wallet-password.txt
├── rtl/
│   ├── RTL-Config.json    # generated
│   └── database/
├── mostro/
│   ├── settings.toml       # generated
│   └── nostr-private.txt   # nsec key (chmod 600)
└── satdress/               # only if LNURL_DOMAIN is set
    ├── .env                # generated (chmod 600)
    └── data/
```

## Ports

All services bind to `127.0.0.1` only (not accessible from the internet).

| Service | lnd1 | lnd2 |
|---------|------|------|
| P2P | 9735 | 9736 |
| gRPC | 10009 | 10010 |
| REST | 8080 | 8081 |

| Service | Port |
|---------|------|
| RTL web UI | 3000 |
| bitcoind P2P | 18444 |
| bitcoind RPC | 18443 |
| ZMQ block | 28332 |
| ZMQ tx | 28333 |
| satdress | 17422 |
